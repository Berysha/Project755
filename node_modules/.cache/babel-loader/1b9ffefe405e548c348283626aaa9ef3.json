{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Proba\\\\Desktop\\\\projekt755\\\\client\\\\src\\\\pages\\\\auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { auth, googleAuthProvider, facebookAuthProvider } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { GoogleOutlined, MailOutlined, FacebookOutlined } from '@ant-design/icons';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = ({\n  history\n}) => {\n  _s();\n\n  const [email, setEmail] = useState(\"berisabekir100@gmail.com\");\n  const [password, setPassword] = useState(\"12341234\");\n  const [loading, setLoading] = useState(false);\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n  let dispatch = useDispatch();\n\n  const roleBasedRedirect = res => {\n    if (res.data.role === \"admin\") {\n      history.push(\"/admin/dashboard\");\n    } else {\n      history.push(\"/user/history\");\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true); // console.table(email, password)\n\n    try {\n      const result = await auth.signInWithEmailAndPassword(email, password); //console.log(result);\n\n      const {\n        user\n      } = result;\n      const idTokenResult = await user.getIdTokenResult();\n      createOrUpdateUser(idTokenResult.token).then(res => {\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: {\n            name: res.data.name,\n            email: res.data.email,\n            token: idTokenResult.token,\n            role: res.data.role,\n            _id: res.data._id\n          }\n        });\n        roleBasedRedirect(res);\n      }).catch(); // history.push(\"/\")\n    } catch (error) {\n      console.log(error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n\n    ;\n  };\n\n  const googleLogin = async () => {\n    auth.signInWithPopup(googleAuthProvider).then(async result => {\n      const {\n        user\n      } = result;\n      const idTokenResult = await user.getIdTokenResult();\n      createOrUpdateUser(idTokenResult.token).then(res => {\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: {\n            name: res.data.name,\n            email: res.data.email,\n            token: idTokenResult.token,\n            role: res.data.role,\n            _id: res.data._id\n          }\n        });\n        roleBasedRedirect(res);\n      }).catch();\n      history.push(\"/\");\n    }).catch(err => {\n      console.log(err);\n      toast.error(err.messaage);\n    });\n  };\n\n  const facebookLogin = async () => {\n    auth.signInWithPopup(facebookAuthProvider).then(async result => {\n      const {\n        user\n      } = result;\n      const idTokenResult = await user.getIdTokenResult();\n      createOrUpdateUser(idTokenResult.token).then(res => {\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: {\n            name: res.data.name,\n            email: res.data.email,\n            token: idTokenResult.token,\n            role: res.data.role,\n            _id: res.data._id\n          }\n        });\n      }).catch();\n      history.push(\"/\");\n    }).catch(err => {\n      console.log(err);\n      toast.error(err.messaage);\n    });\n  };\n\n  const loginForm = () => {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          placeholder: \"Your email\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"Your password\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSubmit,\n        type: \"primary\",\n        className: \"mb-3\",\n        block: true,\n        shape: \"round\",\n        icon: /*#__PURE__*/_jsxDEV(MailOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 19\n        }, this),\n        size: \"large\",\n        disabled: !email || password.length < 6,\n        children: \"Login with Email/Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 6\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container p-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 offset-md-3\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-success\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 28\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 20\n        }, this), loginForm(), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: googleLogin,\n          type: \"danger\",\n          className: \"mb-3\",\n          block: true,\n          shape: \"round\",\n          icon: /*#__PURE__*/_jsxDEV(GoogleOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 19\n          }, this),\n          size: \"large\",\n          children: \"Prijavite se putem Google\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: facebookLogin,\n          type: \"primary\",\n          className: \"mb-3\",\n          block: true,\n          shape: \"round\",\n          icon: /*#__PURE__*/_jsxDEV(FacebookOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 17\n          }, this),\n          size: \"large\",\n          children: \"Prijavite se putem Facebooka\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot/password\",\n          className: \"float-right text-danger\",\n          children: \"Forgot Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"clXLu/EErlV9Sb5e6tbH/G7+Q2c=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Proba/Desktop/projekt755/client/src/pages/auth/Login.js"],"names":["React","useState","useEffect","auth","googleAuthProvider","facebookAuthProvider","toast","Button","GoogleOutlined","MailOutlined","FacebookOutlined","useDispatch","useSelector","Link","createOrUpdateUser","Login","history","email","setEmail","password","setPassword","loading","setLoading","user","state","token","push","dispatch","roleBasedRedirect","res","data","role","handleSubmit","e","preventDefault","result","signInWithEmailAndPassword","idTokenResult","getIdTokenResult","then","type","payload","name","_id","catch","error","console","log","message","googleLogin","signInWithPopup","err","messaage","facebookLogin","loginForm","target","value","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {auth, googleAuthProvider, facebookAuthProvider} from \"../../firebase\";\nimport {toast} from \"react-toastify\";\nimport {Button} from \"antd\";\nimport { \n    GoogleOutlined,\n     MailOutlined, FacebookOutlined,\n} from '@ant-design/icons';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Link} from \"react-router-dom\";\nimport {createOrUpdateUser} from \"../../functions/auth\";\n\n\n\nconst Login = ({history}) => {\n        const [email,setEmail] = useState(\"berisabekir100@gmail.com\")\n        const[password, setPassword] = useState(\"12341234\");\n        const[loading, setLoading] = useState(false);\n\n        const {user} = useSelector((state) => ({...state}));\n        \n        useEffect(() => {\n          if(user && user.token) history.push(\"/\");\n      }, [user, history]);\n\n        \n        let dispatch = useDispatch()\n\n        const roleBasedRedirect = (res) => {\n          if(res.data.role === \"admin\") {\n            history.push(\"/admin/dashboard\")\n          }\n          else{\n            history.push(\"/user/history\")\n          }\n        }\n\n        const handleSubmit = async (e) => {\n            e.preventDefault()\n            setLoading(true)\n           // console.table(email, password)\n           try{\n               const result = await auth.signInWithEmailAndPassword(email, password);\n               //console.log(result);\n                const {user} = result \n                const idTokenResult = await user.getIdTokenResult()\n\n                createOrUpdateUser(idTokenResult.token)\n                .then(\n                  (res) => {\n                  dispatch({\n                    type: \"LOGGED_IN_USER\",\n                     payload: {\n                       name: res.data.name,\n                       email: res.data.email,\n                       token: idTokenResult.token,\n                       role: res.data.role,\n                       _id: res.data._id,\n                     }\n                   });\n                   roleBasedRedirect(res)\n                  })\n                .catch()\n\n              \n                 // history.push(\"/\")\n                \n           } catch (error){\n                console.log(error)\n                toast.error(error.message)\n                setLoading(false);\n           };\n\n        };\n        const googleLogin = async () => {\n            auth.signInWithPopup(googleAuthProvider)\n            .then(async (result) => {\n                const {user} = result \n                const idTokenResult = await user.getIdTokenResult()\n                createOrUpdateUser(idTokenResult.token)\n                .then(\n                  (res) => {\n                  dispatch({\n                    type: \"LOGGED_IN_USER\",\n                     payload: {\n                       name: res.data.name,\n                       email: res.data.email,\n                       token: idTokenResult.token,\n                       role: res.data.role,\n                       _id: res.data._id,\n                     }\n                   });\n                   roleBasedRedirect(res)\n                  })\n                .catch()\n                  history.push(\"/\");\n            })\n            .catch((err) => { \n            console.log (err);\n            toast.error(err.messaage);\n\n        });\n        };\n        const facebookLogin = async () => {\n          auth.signInWithPopup(facebookAuthProvider)\n          .then(async (result) => {\n              const {user} = result \n              const idTokenResult = await user.getIdTokenResult()\n              createOrUpdateUser(idTokenResult.token)\n              .then(\n                (res) => {\n                dispatch({\n                  type: \"LOGGED_IN_USER\",\n                   payload: {\n                     name: res.data.name,\n                     email: res.data.email,\n                     token: idTokenResult.token,\n                     role: res.data.role,\n                     _id: res.data._id,\n                   }\n                 });\n                })\n              .catch()\n                history.push(\"/\");\n          })\n          .catch((err) => { \n          console.log (err);\n          toast.error(err.messaage);\n\n      });\n      };\n\nconst loginForm = () => {\nreturn (\n     <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n     <input \n            type=\"email\" \n            className=\"form-control\" \n            value={email} \n            onChange={(e) => setEmail(e.target.value)}\n            placeholder=\"Your email\"\n            autoFocus\n             />\n             </div> \n             <div className=\"form-group\">\n     <input \n            type=\"password\" \n            className=\"form-control\" \n            value={password} \n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Your password\"\n            autoFocus\n             />\n             </div>\n\n<br/>\n\n            <Button \n            onClick={handleSubmit}\n            type=\"primary\"\n            className=\"mb-3\"\n            block\n            shape=\"round\"\n            icon={<MailOutlined/>}\n            size=\"large\"\n            disabled={!email || password.length <6}\n            >Login with Email/Password</Button>\n    </form>\n)\n    };\n    return (\n        <div className=\"container p-5\">\n          <div className=\"row\">\n             <div className=\"col-md-6 offset-md-3\">\n             {loading ?  ( <h4 className=\"text-success\">Loading...</h4>\n             ) :  (<h4>Login</h4>)}\n            \n                {loginForm()}\n\n                <Button \n            onClick={googleLogin}\n            type=\"danger\"\n            className=\"mb-3\"\n            block\n            shape=\"round\"\n            icon={<GoogleOutlined/>}\n            size=\"large\"\n    \n            >Prijavite se putem Google\n            </Button>\n\n  \n\n              <Button \n          onClick={facebookLogin}\n          type=\"primary\" \n          className=\"mb-3\"\n          block\n          shape=\"round\"\n          icon={<FacebookOutlined/>}\n          size=\"large\"\n  \n          >Prijavite se putem Facebooka\n          </Button>\n\n          <Link to=\"/forgot/password\" className=\"float-right text-danger\">\n            Forgot Password</Link>\n\n           </div>\n      \n         </div>\n      </div>\n  );\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}