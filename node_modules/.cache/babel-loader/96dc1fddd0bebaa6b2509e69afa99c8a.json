{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Proba\\\\Desktop\\\\projekt755\\\\client\\\\src\\\\pages\\\\admin\\\\sub\\\\SubCreate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { createSub, getSub, getSubs, removeSub } from \"../../../functions/sub\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CaregoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SubCreate = () => {\n  _s();\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [subs, setSubs] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [category, setCategory] = useState(\"\"); //step 1\n\n  const [keyword, setKeyword] = useState(\"\");\n  useEffect(() => {\n    loadCategories();\n    loadSubs();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => {\n    setCategories(c.data);\n  });\n\n  const loadSubs = () => getSubs().then(c => {\n    setSubs(c.data);\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(name)\n\n    setLoading(true);\n    createSub({\n      name,\n      parent: category\n    }, user.token).then(res => {\n      setLoading(false);\n      setName(\"\");\n      toast.success(`\"${res.data.name}\" is created`);\n      loadSubs();\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n\n      if (err.response.status === 400) {\n        toast.error(err.response.data);\n      }\n    });\n  };\n\n  const handleRemove = async slug => {\n    /* let answer = window.confirm(\"Delete?\")\n     console.log(answer, slug)*/\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeSub(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted`);\n        loadSubs();\n      }).catch(err => {\n        if (err.response.status === 400) {\n          toast.error(err.response.data);\n        }\n\n        setLoading(false);\n        loadSubs();\n      });\n    }\n  };\n\n  const searched = keyword => c => c.name.toLowerCase().includes(keyword);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(AdminNav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-success\",\n          children: \"Loading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Create sub categories\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"ParentCategory\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category\",\n            className: \"form-control\",\n            onChange: e => setCategory(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Pleace Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this), categories.length > 0 && categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: c._id,\n              children: c.name\n            }, c._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 26\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(CategoryForm, {\n          handleSubmit: handleSubmit,\n          name: name,\n          setName: setName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(LocalSearch, {\n          keyword: keyword,\n          setKeyword: setKeyword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 22\n        }, this), subs.filter(searched(keyword)).map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-info\",\n          children: [s.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => handleRemove(s.slug),\n            className: \"btn btn-sm float-right\",\n            children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n              className: \"text-danger\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 18\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Link, {\n            className: \"btn btn-sm float-right\",\n            to: `/admin/sub/${s.slug}`,\n            children: /*#__PURE__*/_jsxDEV(EditOutlined, {\n              className: \"text-success\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 21\n          }, this)]\n        }, s._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SubCreate, \"dwPpU26xsrglG1n1W/9vGNqHLgk=\", false, function () {\n  return [useSelector];\n});\n\n_c = SubCreate;\nexport default SubCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubCreate\");","map":{"version":3,"sources":["C:/Users/Proba/Desktop/projekt755/client/src/pages/admin/sub/SubCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","getCategories","createSub","getSub","getSubs","removeSub","Link","EditOutlined","DeleteOutlined","CategoryForm","LocalSearch","SubCreate","user","state","name","setName","loading","setLoading","subs","setSubs","categories","setCategories","category","setCategory","keyword","setKeyword","loadCategories","loadSubs","then","c","data","handleSubmit","e","preventDefault","parent","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","searched","toLowerCase","includes","target","value","length","map","_id","filter","s"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport AdminNav from \"../../../components/nav/AdminNav\"\nimport {toast} from \"react-toastify\"\nimport {useSelector} from \"react-redux\"\nimport {getCategories} from \"../../../functions/category\"\nimport {createSub,\n       getSub, getSubs,\n        removeSub} from \"../../../functions/sub\"\nimport {Link} from \"react-router-dom\";\nimport {EditOutlined, DeleteOutlined} from \"@ant-design/icons\"\nimport CategoryForm from \"../../../components/forms/CaregoryForm\"\nimport LocalSearch from \"../../../components/forms/LocalSearch\"\n\nconst SubCreate = () => {\n    const {user} = useSelector(state => ({...state}))\n    const [name, setName] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [subs,setSubs] = useState([])\n    const [categories,setCategories] = useState([])\n    const [category, setCategory] = useState(\"\")\n    \n\n     //step 1\n     const [keyword, setKeyword] = useState(\"\")\n\n    useEffect(() =>{\n            loadCategories()\n            loadSubs()\n    }, [])\n\n    const loadCategories = () =>\n         getCategories()\n        .then((c) => {\n        setCategories(c.data)\n        })\n\n        const loadSubs = () =>\n        getSubs()\n        .then((c) => {\n        setSubs(c.data)\n        })\n\n    const handleSubmit= (e) => {\n        e.preventDefault()\n       // console.log(name)\n        setLoading(true)\n        createSub({name, parent: category,}, user.token)\n        .then((res) => {\n            setLoading(false)\n            setName(\"\")\n            toast.success(`\"${res.data.name}\" is created`)\n            loadSubs()\n        })\n        .catch(err => {\n            console.log(err)\n            setLoading(false) \n            if (err.response.status === 400) {\n                 toast.error(err.response.data)\n}  \n      })\n    }\n\n    const handleRemove = async (slug) => {\n       /* let answer = window.confirm(\"Delete?\")\n        console.log(answer, slug)*/\n        if(window.confirm(\"Delete?\")){\n            setLoading(true)\n            removeSub(slug, user.token)\n            .then((res) => {\n                    setLoading(false)\n                    toast.error(`${res.data.name} deleted`)\n                    loadSubs()\n            })\n            .catch((err) => {\n                if(err.response.status === 400) {\n                    toast.error(err.response.data)\n                }\n                setLoading(false)\n                loadSubs()\n            })\n        }\n    }\n \n    const searched= (keyword) => (c) => c\n        .name\n        .toLowerCase()\n        .includes(keyword)\n\n    \n    return (\n        <div className=\"container-fluid\">\n             <div className=\"row\">\n                <div className=\"col-md-2\">\n                     <AdminNav />\n                </div>\n        <div className=\"col\">\n             {loading ?( <h4  \n             className=\"text-success\">Loading..</h4>\n             ) : (\n            <h4>Create sub categories</h4>)}\n           \n               \n\n\n                 <div className=\"form-group\">\n                     <label>ParentCategory</label>\n                     <select \n                        name=\"category\"\n                        className=\"form-control\" \n                        onChange={(e) => setCategory(e.target.value)}>\n\n                        <option>Pleace Select</option>\n                        {categories.length > 0 && categories.map((c) =>\n                        (<option key={c._id} value={c._id}>\n                        {c.name}\n                        </option>\n                        ))}\n                     </select>\n                 </div>\n\n              \n\n                 <CategoryForm \n                     handleSubmit={handleSubmit}\n                     name={name}\n                     setName={setName}\n                 />\n\n                  <LocalSearch \n                    keyword={keyword}\n                    setKeyword= {setKeyword}\n                 />\n\n                     <hr/>\n              \n               \n      {subs.filter(searched(keyword)).map((s) => (\n                <div className=\"alert alert-info\" key={s._id}>{s.name}\n                 <span  \n                    onClick={() => handleRemove(s.slug)} \n                    className=\"btn btn-sm float-right\"\n                    >\n                    <DeleteOutlined className=\"text-danger\" />\n                    </span>{\" \"} \n\n                    <Link className=\"btn btn-sm float-right\" \n                    to={`/admin/sub/${s.slug}`}> \n                    <EditOutlined className=\"text-success\" />\n                \n                    </Link>\n\n                </div>))}\n            </div>\n        </div>\n    </div>\n    )\n}\n\nexport default SubCreate;"]},"metadata":{},"sourceType":"module"}